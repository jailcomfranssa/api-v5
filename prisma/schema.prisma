// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id                     Int                   @id @default(autoincrement())
  email                  String                @unique
  senha                  String
  name                   String
  telefone               String?
  role                   Role                  @default(CLIENTE)

  // relacionamento inverso (1:1)
  clienteCadastro        ClienteCadastro?      @relation("UserToCliente")
  funcionarioCadastro    FuncionarioCadastro?  @relation("UserToFuncionario")

  createdAt              DateTime              @default(now())
  updatedAt              DateTime              @updatedAt
}

model ClienteCadastro {
  id               Int      @id @default(autoincrement())
  cpf              String   @unique @db.VarChar(11)
  rg               String?
  telefone         String?
  dataNascimento   DateTime?

  //usuario 1:1
  userId           Int      @unique
  user             User     @relation("UserToCliente", fields: [userId], references: [id], onDelete: Cascade)

  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("clientes")
}

model FuncionarioCadastro {
  id             Int      @id @default(autoincrement())
  cpf            String   @unique @db.VarChar(11)
  cargo          String
  telefone       String?
  salario        Decimal  @db.Decimal(10, 2)
  dataAdmissao   DateTime

  //usuario 1:1
  userId         Int      @unique
  user           User     @relation("UserToFuncionario", fields: [userId], references: [id], onDelete: Cascade)

  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("funcionarios")
}

enum Role {
  ADMIN
  FUNCIONARIO
  CLIENTE
}


//npx tsc --noEmit
